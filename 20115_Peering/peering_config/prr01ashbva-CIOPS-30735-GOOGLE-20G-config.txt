
This Peering config is for CIOPS-30735 in prr01ashbva for GOOGLE with capacity BE1076-20G

!CHANGE SPECIFIC PRE-CHECKS BELOW!

Router Name: prr01ashbva

show int be1076
!Expected Output : be1076 should be free


show interface Hu0/0/0
show controllers Hu0/0/0 phy | i dB
!Expected Output: link light level should be good and no errors to be seen!


show route 138.128.140.9/31
!Expected Output: 138.128.140.9/31 IPv4 Space should be free and should not be present in the routing table


show route ipv6 unicast 2a04:c606:1::9/126
!Expected Output: 2a04:c606:1::9/126 IPv6 Space should be free and should not be present in the routing table


sh run formal | i AS49544_GOOGLE_IPV4_GROUP
sh run formal | i AS49544_GOOGLE_IPV6_GROUP
!Expected Output: Ensure the new group being created doesnt exist already. if group already exists, notify P&D, only neighbor need to be added to existing group
!WARNING: If BGP group already existed, chances of overwrite possible!! USE CAUTION!!

show bgp all all sum | i 49544
!Expected Output: Check if BGP neighbors exist, if first turn up, then there should be no output

show bgp ipv4 unicast neighbor 138.128.140.8 advertised-routes
!Expected Output: No BGP neighbor should exist


show bgp ipv4 unicast neighbor 138.128.140.8 routes
!Expected Output: No BGP neighbor should exist


show bgp ipv6 unicast neighbor 2a04:c606:1::8 advertised-routes
!Expected Output: No BGP neighbor should exist


show bgp ipv6 unicast neighbor 2a04:c606:1::8 routes
!Expected Output: No BGP neighbor should exist
!

!


!CHANGE SPECIFIC CONFIGURATIONS BELOW!

START

Router Name: prr01ashbva

!LAG 1 Interface Configs!
interface be1076
interface be1076 description "[TYPE=PEER][BW=20G][NAME=GOOGLE][AS=49544][GRNT=chn00499482][IP=138.128.140.8]"
interface be1076 service-policy input DDOS_POLICER_POLICY
interface be1076 ipv4 address 138.128.140.9/31
interface be1076 ipv6 address 2a04:c606:1::9/126
interface be1076 load-interval 30
interface be1076 flow ipv4 monitor NETFLOW_IPV4 sampler FNF_SAMPLER_MAP ingress
interface be1076 flow ipv6 monitor NETFLOW_IPV6 sampler FNF_SAMPLER_MAP ingress
interface be1076 flow mpls monitor NETFLOW_MPLS sampler FNF_SAMPLER_MAP ingress
interface be1076 dampening 1 750 2000 4
interface be1076 ipv4 access-group EDGE_IN_IPV4_FILTER ingress
interface be1076 ipv6 access-group EDGE_IN_IPV6_FILTER ingress

!Interface Config LAG 1!
interface Hu0/0/0
interface Hu0/0/0 description [TYPE=PEER][BW=100G][NAME=GOOGLE][AS=49544][LAG=1076][GRNT=chn00499471][JIRA=CIOPS-30735][CCID=21374447][PCID:]
interface Hu0/0/0 bundle id 1076 mode active
interface Hu0/0/0 lacp period short
interface Hu0/0/0 carrier-delay up 500 down 0
interface Hu0/0/0 dampening 1 750 2000 4




!BGP Configs!

router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP remote-as 49544
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP description GOOGLE_IPv4_SFI
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP address-family ipv4 unicast
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP password clear jutran7dEbUwr6c9
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP address-family ipv4 unicast send-community-ebgp
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP address-family ipv4 unicast route-policy INBOUND-PEERS in
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP address-family ipv4 unicast maximum-prefix 10000 90
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP address-family ipv4 unicast route-policy OUTBOUND_PEERS out
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP address-family ipv4 unicast remove-private-AS
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV4_GROUP address-family ipv4 unicast soft-reconfiguration inbound


router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP remote-as 49544
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP description GOOGLE_IPv6_SFI
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP address-family ipv6 unicast
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP password clear jutran7dEbUwr6c9
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP address-family ipv6 unicast send-community-ebgp
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP address-family ipv6 unicast route-policy IPV6-INBOUND-PEERS in
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP address-family ipv6 unicast maximum-prefix 1000 90
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP address-family ipv6 unicast route-policy IPV6-OUTBOUND-PEERS out
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP address-family ipv6 unicast remove-private-AS
router bgp 20115 neighbor-group AS49544_GOOGLE_IPV6_GROUP address-family ipv6 unicast soft-reconfiguration inbound

!Adding BGP Neighbor!

router bgp 20115 neighbor 138.128.140.8
router bgp 20115 neighbor 138.128.140.8 use neighbor-group AS49544_GOOGLE_IPV4_GROUP
!
router bgp 20115 neighbor 2a04:c606:1::8
router bgp 20115 neighbor 2a04:c606:1::8 use neighbor-group AS49544_GOOGLE_IPV6_GROUP
!

END

!CHANGE SPECIFIC POST-CHECKS!

Router Name: prr01ashbva

show int be1076
show int be1076 | in "rate|drop|err"
show lacp bundle-ether1076
!Expected Output : be1076 should be UP and error free


show route 138.128.140.9/31
!Expected Output: 138.128.140.9/31 IPv4 Space should be present as connected route in the routing table
ping 138.128.140.8 source 138.128.140.9 count 1000


show route ipv6 unicast 2a04:c606:1::9/126
!Expected Output: 2a04:c606:1::9/126 IPv6 Space should be present as connected route in the routing table
ping 2a04:c606:1::8 source 2a04:c606:1::9 count 1000




show bgp all all sum | i 49544
!Expected Output: Newly configured 138.128.140.8 & 2a04:c606:1::8 BGP neighbors state to be UP

show bgp neighbor 138.128.140.8 configuration
show bgp neighbor 2a04:c606:1::8 configuration      
!Expected Output: Check newly configured  &  parameters

show bgp ipv4 unicast neighbor 138.128.140.8 advertised-routes
!Expected Output: AS20115 full customer route IPV4 table should be exported


show bgp ipv4 unicast neighbor 138.128.140.8 routes
!Expected Output: AS49544 IPv4 routes should be received


show bgp ipv6 unicast neighbor 2a04:c606:1::8 advertised-routes
!Expected Output: AS20115 full customer route IPV6 table should be exported


show bgp ipv6 unicast neighbor 2a04:c606:1::8 routes
!Expected Output: AS49544 IPV6 routes should be received.
!

!

show interface Hu0/0/0 | in "rate|drop|err"

!Expected Output : Make sure there are no errors or drops

